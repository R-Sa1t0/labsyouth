package main

import (
	"net"
	"os"
)

//動かない

func main() {
	conn, err := net.Dial("ip6:ipv6-icmp", "::1")
	if err != nil {
		os.Exit(1)
	}
	defer conn.Close()

	// Manually construct IPv6 packet
	msg := []byte{
		0x60, 0x00, 0x00, 0x00, // Version, Traffic Class, Flow Label
		0x00, 0x10, // Payload Length
		0x3a, // Next Header (58 means IPv6-ICMP)
		0x40, // Hop Limit
		// Source Address
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01,
		// Destination Address
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01,
		// Payload
		0x80, 0x00, 0x00, 0x00, // Type, Code, Checksum
		0x00, 0x01, 0x00, 0x01, // Identifier, Sequence Number
		0x00, 0x00, 0x00, 0x00, // Data
	}

	_, err = conn.Write(msg)
	if err != nil {
		os.Exit(1)
	}
}
